// pipeline {
//     agent any
    
//     stages {
//         stage('Process Webhook') {
//             steps {
//                 import groovy.json.JsonSlurper
//                 def test = params.test
//                 def jsonSlurper = new JsonSlurper()
//                 def parsedJson = jsonSlurper.parseText(test)
//                 def refValue = parsedJson.ref

//                 println "Ref Value: ${refValue}"
//             }
//         }
        
//         // Other stages in your pipeline
//     }
// }

pipeline {
    agent any

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
                import com.jayway.jsonpath.JsonPath

                def json = '''
                {
                  "payload": [
                    "{\"ref\":\"refs/heads/master\",\"before\":\"2f4e70af58797916847a528032e8318066d0c360\",\"after\":\"d6c9a5847c1593f51fbbd915241f4a868c543b2a\",\"repository\":{\"id\":652465617,\"node_id\":\"R_kgDOJuPV0Q\",\"name\":\"new_repo\",\"full_name\":\"NagabairuManoj/new_repo\",\"private\":false,\"owner\":{\"name\":\"NagabairuManoj\",\"email\":\"manojnagabairu@gmail.com\",\"login\":\"NagabairuManoj\",\"id\":72125822,\"node_id\":\"MDQ6VXNlcjcyMTI1ODIy\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/72125822?v\u003d4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/NagabairuManoj\",\"html_url\":\"https://github.com/NagabairuManoj\",\"followers_url\":\"https://api.github.com/users/NagabairuManoj/followers\",\"following_url\":\"https://api.github.com/users/NagabairuManoj/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/NagabairuManoj/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/NagabairuManoj/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/NagabairuManoj/subscriptions\",\"organizations_url\":\"https://api.github.com/users/NagabairuManoj/orgs\",\"repos_url\":\"https://api.github.com/users/NagabairuManoj/repos\",\"events_url\":\"https://api.github.com/users/NagabairuManoj/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/NagabairuManoj/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/NagabairuManoj/new_repo\",\"description\":null,\"fork\":false,\"url\":\"https://github.com/NagabairuManoj/new_repo\",\"forks_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/forks\",\"keys_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/teams\",\"hooks_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/hooks\",\"issue_events_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/events\",\"assignees_url\":\"https://api.github.com/repos/NagabairuManoj/new_repo/assignees{/user}\",\"

                            }
                  }
        }
    }
}


